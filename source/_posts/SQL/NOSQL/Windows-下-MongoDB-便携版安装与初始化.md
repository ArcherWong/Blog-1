---
title: Windows 下 MongoDB 便携版安装与初始化
tags:
  - Windows
  - DB
  - MongoDB
abbrlink: 424bf4e1
date: 2018-08-08 01:39:21
---

# Windows 下 MongoDB 便携版安装与初始化

> [官网](https://www.mongodb.org/)

## 下载

> [下载位置](https://www.mongodb.org/dl/win32/x86_64-2008plus-ssl)

选择一个便携版本下载（`.zip` 结尾），例如吾辈选择的就是 [win32/mongodb-win32-x86_64-2008plus-ssl-4.0.1.zip](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-4.0.1.zip)

## 配置环境变量

下载完成后解压到本地，将 `/bin/` 目录添加环境变量 `Path` 中以方便使用 `mongodb` 的命令。

配置完成后验证一下

```bash
mongo -version































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































```

如果环境变量配置正确的话会有类似于下面的这种输出

```txt
MongoDB shell version v4.0.1































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































git version: 54f1582fc6eb01de4d4c42f26fc133e623f065fb































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































allocator: tcmalloc































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































modules: none































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































build environment:































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    distmod: 2008plus-ssl































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    distarch: x86_64































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    target_arch: x86_64































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































```

## 配置日志文件与数据目录

吾辈的 `mongodb` 的安装目录是 `D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1`，所以就在安装目录下创建数据与日志目录了。

目录列表如下：

- mongodb_data
  - log
    - mongodb.log
  - data

指定日志文件的位置

```bash
mongod --logpath "D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\log\mongodb.log"































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































```

指定数据存放的目录

```bash
mongod --dbpath "D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\data"































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































```

输出

```bash
2018-08-08T22:26:35.411+0800 I CONTROL  [main] Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols 'none'































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.816+0800 I CONTROL  [initandlisten] MongoDB starting : pid=9292 port=27017 dbpath=D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\data 64-bit host=DESKTOP-PJ0O5TE































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.817+0800 I CONTROL  [initandlisten] targetMinOS: Windows 7/Windows Server 2008 R2































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.817+0800 I CONTROL  [initandlisten] db version v4.0.1































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.817+0800 I CONTROL  [initandlisten] git version: 54f1582fc6eb01de4d4c42f26fc133e623f065fb































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.818+0800 I CONTROL  [initandlisten] allocator: tcmalloc































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.818+0800 I CONTROL  [initandlisten] modules: none































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.818+0800 I CONTROL  [initandlisten] build environment:































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.819+0800 I CONTROL  [initandlisten]     distmod: 2008plus-ssl































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.819+0800 I CONTROL  [initandlisten]     distarch: x86_64































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.819+0800 I CONTROL  [initandlisten]     target_arch: x86_64































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.819+0800 I CONTROL  [initandlisten] options: { storage: { dbPath: "D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\data" } }































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.821+0800 I STORAGE  [initandlisten] Detected data files in D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\data created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:35.822+0800 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=3525M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),statistics_log=(wait=0),verbose=(recovery_progress),































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:36.168+0800 I STORAGE  [initandlisten] WiredTiger message [1533738396:168596][9292:140713667352288], txn-recover: Main recovery loop: starting at 2/14336































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:36.356+0800 I STORAGE  [initandlisten] WiredTiger message [1533738396:356070][9292:140713667352288], txn-recover: Recovering log 2 through 3































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:36.533+0800 I STORAGE  [initandlisten] WiredTiger message [1533738396:533063][9292:140713667352288], txn-recover: Recovering log 3 through 3































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:36.657+0800 I STORAGE  [initandlisten] WiredTiger message [1533738396:656564][9292:140713667352288], txn-recover: Set global recovery timestamp: 0































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:36.955+0800 I RECOVERY [initandlisten] WiredTiger recoveryTimestamp. Ts: Timestamp(0, 0)































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.188+0800 I CONTROL  [initandlisten]































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.189+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.189+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.190+0800 I CONTROL  [initandlisten]































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.190+0800 I CONTROL  [initandlisten] ** WARNING: This server is bound to localhost.































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.191+0800 I CONTROL  [initandlisten] **          Remote systems will be unable to connect to this server.































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.191+0800 I CONTROL  [initandlisten] **          Start the server with --bind_ip <address> to specify which IP































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.191+0800 I CONTROL  [initandlisten] **          addresses it should serve responses from, or with --bind_ip_all to































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.192+0800 I CONTROL  [initandlisten] **          bind to all interfaces. If this behavior is desired, start the































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.192+0800 I CONTROL  [initandlisten] **          server with --bind_ip 127.0.0.1 to disable this warning.































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.193+0800 I CONTROL  [initandlisten]































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.834+0800 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'D:/Program/mongodb-win32-x86_64-2008plus-ssl-4.0.1/mongodb_data/data/diagnostic.data'































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:37.842+0800 I NETWORK  [initandlisten] waiting for connections on port 27017































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































2018-08-08T22:26:38.230+0800 I NETWORK  [listener] connection accepted from 127.0.0.1:12598 #1 (1 connection now open)































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































```

然后，就停住了，其实这里并未发生错误，仔细看最后一行 `NETWORK [listener] connection accepted from 127.0.0.1:12598`，指的是正在监听连接 `127.0.0.1:12598`。所以这个时候在开一个新的 `cmd` 标签输入 `mongo` 命令就进入到 `mongo shell` 里面玩耍啦

## 安装服务

每次打开都要手动输入命令指定数据目录并启动 `mongod` 未免麻烦，我们可以将之添加到系统服务中，以后需要的时候只要启动服务就好了，也能设置自动启动什么的了呢

```bash
mongod --dbpath "D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\data" --logpath "D:\Program\mongodb-win32-x86_64-2008plus-ssl-4.0.1\mongodb_data\log\mongodb.log" --auth --install --serviceName "MongoDB"































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































```

检查一下系统服务里面是否有 `MongoDB`，如果没有的话使用管理员权限打开 `cmd` 再执行一次上面的命令就好了，如果服务没有启动的话就启动它。

这样便安装完成了，在命令行输入 `mongo` 就可以啦
